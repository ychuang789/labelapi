from datetime import datetime
from unittest import TestCase

from utils.data.input_example import InputExample
from workers.data_filter_builder import DataFilterBuilder

fake_data_list = [
    'æˆ‘è€å©†çš„pixel 6 pro è·Ÿæˆ‘è‡ªå·±çš„lg v60 ä¹Ÿæ˜¯ä¸€æ¨£ï¼Œ<BR>éƒ½æ˜¯é…å°ä¸‰æ˜Ÿæ‰‹éŒ¶active2 , line é€šè©±æ™‚è¢å¹•ä¸æœƒè‡ªå‹•è®Šæš—ã€‚<BR>ç›´åˆ°çœ‹äº†æ¨“ä¸Šçš„å›æ–‡ï¼Œ<BR>æŠŠæ‰‹éŒ¶èªéŸ³é€šè©±åŠŸèƒ½é—œé–‰å¾Œå°±æ¢å¾©æ­£å¸¸äº†ã€‚<BR>(æ‹¿åˆ°è€³é‚Šé€šè©±æ™‚è¢å¹•è‡ªå‹•è®Šæš—)æ„Ÿè¬å¤§å®¶å¹«æˆ‘è§£æ±ºäº†ä¸€å€‹å›°æ“¾çš„å•é¡Œã€‚',
    '<BR>æˆ‘é€™é™£å­è¢«è€å©†ç‹‚é¤µé£Ÿæ¶ˆå¤œ...ä¸‹å ´å°±æ˜¯èƒ–äº†2å…¬æ–¤....<BR>',
    'å¦‚æœæ™‚å…‰å¾ä¾†,æˆ‘æœƒé¸æ“‡è·Ÿå²³æ¯åŒä½,å¨¶äººå®¶å¥³å…’åˆé™„å¸¶æœªä¾†å­©å­çš„ä¿æ¯,æ²’æœ‰æˆ¿è²¸è² æ“”,ç”Ÿæ´»å¥½éå‘€...',
    'æˆ‘æ”¹å¤©è·Ÿè€å©†åµæ¶æƒ…ç·’ä½è½æ™‚<BR>ä¸€å®šå°ˆç¨‹ä¾†æ‰¾é»ƒç¤¾é•·ç™¼æ´©ä¸€ä¸‹<BR>ç¤¾é•·é€™éº¼niceçš„äººæ‡‰è©²å¯ä»¥æ¥å—å§',
    'æˆ‘æ˜¯ä»Šå¹´å¤§ä¸‰çš„è½‰å­¸ç”Ÿ çˆ¬éæ–‡èªªé«”è‚²èª²å­¸åˆ†æ˜¯ç®—æ¬¡çš„ ç¸½å…±è¦ä¿®å››æ¬¡ é‚£è«‹å• 1. å¯ä»¥å››æ¬¡éƒ½ä¸Šä¸€æ¨£çš„é‹å‹•å—ï¼Ÿ 2. ä¸€å€‹å­¸æœŸå¯ä»¥ä¿®å…©é–€é«”è‚²èª²å—ï¼Ÿï¼ˆç®—å­¸åˆ†çš„',
    'æˆ‘è¶…å¥½å¥‡å¤§å­¸ä¹‹é“æ˜¯åœ¨ä¸Šä»€éº¼ã„Ÿå“ˆå“ˆå“ˆ',
    'å„ä½å­¸é•·å§çœŸçš„æ˜¯æ»¿è¶³äº†æˆ‘å°å¤§å­¸ç”Ÿæ´»çš„æƒ³åƒ...']

fake_data_list_2 = ['ã€ğŸ“£ç¤¦å±±å°å°è—è¡“å®¶é›†åˆå›‰ï¼ä¸€æ—¥å±±åŸæ¢éšªXé‡‘å·¥DIY ç­‰ä½ ä¾†å ±åâ—ï¸ã€‘<BR>2020å¤æ—¥é™å®šğŸŒï¼ç¤¦å±±è—è¡“å­£é–‹è·‘å•¦ï¼<BR>#æ–°åŒ—å¸‚ç«‹é»ƒé‡‘åšç‰©é¤¨ ä»Šå¤ç‰¹åˆ¥æ¨å‡ºã€ç¤¦å±±ç©è—è¡“ã€‘æ°´é‡‘ä¹è—è¡“æ•™è‚²é«”é©—èª²ç¨‹ğŸ¨<BR>âœ¨åœ°è¡¨æœ€åˆ’ç®—âœ¨â”€â”€ğŸ’¸2å¼µåœ‹çˆ¶çš„è²»ç”¨ï¼Œåƒå–ç©æ¨‚åŒ…é€é€ğŸ¥³<BR>âœ¨èª²ç¨‹è¶…è±å¯Œâœ¨â”€â”€â›°ï¸ä¸Šåˆå¿«æ¨‚å±±åŸéŠï¼Œä¸‹åˆé‡‘å·¥å‹•æ‰‹åšğŸ”¨<BR>âœ¨çˆ¶æ¯å¥½è¼•é¬†âœ¨â”€â”€ğŸ‘¶å‡æ—¥å°å­©æ”¾é€™è£¡ï¼Œçˆ¸åª½é€é™æ”¾å‡å»ğŸ˜<BR>åé¡æœ‰é™ï¼Œæ»¿äº†å°±æ²’å•¦ï½è¶•å¿«ä¾†å ±ååƒåŠ å§ğŸ™Œ<BR>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<BR>ï½œæ´»å‹•è³‡è¨Šï½œ<BR>ğŸ“…æ´»å‹•çš†ç‚ºä¸€æ—¥èª²ç¨‹ï¼Œæ¢¯æ¬¡å¦‚ä¸‹ï¼š<BR>ã€ç¤¦å±±ç©è—è¡“ã€‘æ°´é‡‘ä¹è—è¡“æ•™è‚²é«”é©—èª²ç¨‹<BR>7/25ï¼ˆå…­ï¼‰ã€7/26ï¼ˆæ—¥ï¼‰ã€8/1ï¼ˆå…­ï¼‰<BR>ã€ç¤¦å±±ç©è—è¡“ã€‘æ°´é‡‘ä¹è—è¡“æ•™è‚²é«”é©—èª²ç¨‹Xå¤è¹Ÿæœˆ<BR>9/13ï¼ˆæ—¥ï¼‰ã€9/19ï¼ˆå…­ï¼‰ã€9/20ï¼ˆæ—¥ï¼‰<BR>ğŸ“æ´»å‹•åœ°é»ï¼šæ–°åŒ—å¸‚ç«‹é»ƒé‡‘åšç‰©é¤¨åŠå‘¨é‚Šåœ°å€<BR>ğŸ™‹æ´»å‹•å°è±¡ï¼šåœ‹å°å››è‡³å…­å¹´ç´šå­¸ç«¥(åŒ…æ‹¬å°ä¸‰å‡å°å››åŠæ‡‰å±†ç•¢æ¥­ç”Ÿ)<BR>ğŸ‘«æ‹›ç”Ÿäººæ•¸ï¼šæ¯æ¢¯æ¬¡15å<BR>ğŸ’°å ±åè²»ç”¨ï¼šæ–°å°å¹£200å…ƒæ•´/æ¯äººæ¯æ¢¯æ¬¡ï¼ˆè²»ç”¨å…§å«å°è¦½ã€é‡‘å·¥æ•™æã€ä¿éšªã€é¤é»ã€äº¤é€šç­‰ï¼‰<BR>ğŸ“¢å ±åæ™‚é–“ï¼šå³æ—¥èµ·-7æœˆ16æ—¥ï¼ˆå››ï¼‰<BR>ğŸ’¡å ±åç¶²é ï¼šhttps://forms.gle/9MFNPyV2XxB1EMSN7<BR>â˜ï¸å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹æ–¼ä¸Šç­æ—¥è¯ç¹«(02)2597-9725 å»–å°å§ã€ç‹å°å§'
]

class TestDataFilterBuilder(TestCase):
    """Test the data filter func"""
    fake_data_input = [InputExample(id_="",
                                    s_area_id="",
                                    author="",
                                    title="",
                                    content=i,
                                    post_time=datetime.now())
                       for i in fake_data_list_2]

    def setUp(self):
        self.builder = DataFilterBuilder()
        self.id_list = [1]
        self.dataset = self.fake_data_input

    # def test_get_task_instance(self):
    #     task_list = self.builder.get_task_instance(self.id_list)
    #     self.assertIsNotNone(task_list)

    def test_method_chain(self):
        output_list = self.builder.data_filter_method_chain(self.dataset, [2,3,4,5])
        self.assertNotEqual(len(output_list), len(fake_data_list))
        self.assertNotEqual(len(output_list), 0)



